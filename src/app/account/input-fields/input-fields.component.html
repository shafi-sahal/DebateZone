<body>
  <form [formGroup]="form">
    <mat-form-field>
      <mat-label>Full name</mat-label>
      <input matInput formControlName="name">
    </mat-form-field>
    <p class="invalid"*ngIf="name?.hasError('pattern')">Give a valid name, buddy</p>

    <mat-form-field>
      <mat-label>Username</mat-label>
      <div class="container-input-with-spinner">
        <input matInput formControlName="username">
        <mat-spinner *ngIf="(username?.statusChanges | async) === 'PENDING'" [diameter]="19"></mat-spinner>
      </div>
    </mat-form-field>
    <app-username-validation-errors [errors]="username?.errors"></app-username-validation-errors>
    <p
      *ngIf="(username?.statusChanges | async) === 'VALID'"
      class="valid">
      Username is available!!!
    </p>

    <mat-form-field>
      <mat-label>Email</mat-label>
      <div class="container-input-with-spinner">
        <input #inputEmail matInput type="email" formControlName="email">
        <mat-spinner *ngIf="(email?.statusChanges | async) === 'PENDING'" [diameter]="19"></mat-spinner>
      </div>
    </mat-form-field>
    <div class="invalid">
      <p *ngIf="email?.hasError('pattern')">Give a valid email, buddy</p>
      <p *ngIf="email?.hasError('isDuplicateEmail')">
        An account with the same email already exists
      </p>
    </div>
    <mat-form-field>
      <mat-label>Mobile</mat-label>
      <input matInput formControlName="mobile">
    </mat-form-field>
  </form>
  <button (click)="print()"></button>
</body>

