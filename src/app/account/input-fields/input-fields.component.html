<body>
  <form [formGroup]="form" (ngSubmit)="formSubmit.emit()">
    <mat-form-field>
      <mat-label>Full name</mat-label>
      <input matInput formControlName="name" (input)="name?.setErrors(null)" (blur)="controlBlur.emit($event)">
    </mat-form-field>

    <mat-form-field>
      <mat-label>Username</mat-label>
      <div class="container-input-with-spinner">
        <input matInput formControlName="username" (blur)="controlBlur.emit($event)">
        <mat-spinner *ngIf="(username?.statusChanges | async) === 'PENDING'" [diameter]="19"></mat-spinner>
      </div>
    </mat-form-field>
    <app-username-validation-errors [errors]="username?.errors"></app-username-validation-errors>
    <p
      *ngIf="usernameStatus === 'VALID'"
      class="valid">
      Username is available!!!
    </p>

    <mat-form-field>
      <mat-label>Email</mat-label>
      <div class="container-input-with-spinner">
        <input #inputEmail matInput type="email" formControlName="email" (input)="email?.setErrors(null)" (blur)="controlBlur.emit($event)">
        <mat-spinner *ngIf="(email?.statusChanges | async) === 'PENDING'" [diameter]="19"></mat-spinner>
      </div>
    </mat-form-field>
    <div class="invalid">
      <p *ngIf="email?.hasError('isDuplicateEmail')">
        An account with the same email already exists
      </p>
    </div>

    <mat-form-field>
      <mat-label>Mobile</mat-label>
      <input matInput formControlName="mobile" readonly>
    </mat-form-field>

    <mat-checkbox color="primary" [checked]="keepMeLoggedIn">
      Keep me logged in
    </mat-checkbox>
    <p class="keep-me-logged-in">Unchecking this will force you to enter your login details whenever you open DebateZone</p>

    <button class="diagonal-rounded-large" mat-raised-button color="primary" [disabled]="shouldDisableButton">Update</button>
  </form>
</body>
